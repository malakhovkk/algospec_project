# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∞–π—Ç–∞ –Ω–∞ –ø–æ—Ä—Ç—É 80

## üéØ –¶–µ–ª—å
–ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–∞–π—Ç —Ç–∞–∫, —á—Ç–æ–±—ã –æ–Ω –±—ã–ª –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º HTTP –ø–æ—Ä—Ç—É 80 (–±–µ–∑ —É–∫–∞–∑–∞–Ω–∏—è –ø–æ—Ä—Ç–∞ –≤ URL).

## ‚úÖ –¢–µ–∫—É—â–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

–í–∞—à `nginx.conf` —É–∂–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω –Ω–∞ –ø–æ—Ä—Ç 80! –í –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –µ—Å—Ç—å:
```nginx
server {
    listen 80;  # ‚Üê Nginx —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80
    server_name _;
    ...
}
```

## üìã –ü–æ—à–∞–≥–æ–≤–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è

### 1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏
sudo nginx -v

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
sudo systemctl status nginx

# –ï—Å–ª–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω, –∑–∞–ø—É—Å—Ç–∏—Ç–µ:
sudo systemctl start nginx
sudo systemctl enable nginx
```

### 2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–∞ —Å–µ—Ä–≤–µ—Ä

```bash
# –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª nginx.conf –Ω–∞ —Å–µ—Ä–≤–µ—Ä
sudo cp nginx.conf /etc/nginx/sites-available/algospec

# –ò–ª–∏ —Å–æ–∑–¥–∞–π—Ç–µ –≤—Ä—É—á–Ω—É—é:
sudo nano /etc/nginx/sites-available/algospec
```

**–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ø–æ—Ä—Ç–∞ 80:**

```nginx
server {
    listen 80;
    server_name _;  # –∏–ª–∏ –≤–∞—à –¥–æ–º–µ–Ω/IP

    # –§—Ä–æ–Ω—Ç–µ–Ω–¥ (Next.js –Ω–∞ –ø–æ—Ä—Ç—É 3000)
    location / {
        proxy_pass http://localhost:3000;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }

    # API (–±—ç–∫–µ–Ω–¥ –Ω–∞ –ø–æ—Ä—Ç—É 3001)
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
        proxy_cache_bypass $http_upgrade;
    }
}
```

### 3. –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –°–æ–∑–¥–∞–π—Ç–µ —Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫—É—é —Å—Å—ã–ª–∫—É
sudo ln -s /etc/nginx/sites-available/algospec /etc/nginx/sites-enabled/

# –£–¥–∞–ª–∏—Ç–µ –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é (–µ—Å–ª–∏ –Ω—É–∂–Ω–æ)
sudo rm /etc/nginx/sites-enabled/default
```

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
sudo nginx -t
```

–î–æ–ª–∂–Ω–æ –≤—ã–≤–µ—Å—Ç–∏: `nginx: configuration file /etc/nginx/nginx.conf test is successful`

### 5. –ü–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∏—Ç–µ Nginx

```bash
sudo systemctl reload nginx
# –∏–ª–∏
sudo systemctl restart nginx
```

### 6. –û—Ç–∫—Ä–æ–π—Ç–µ –ø–æ—Ä—Ç 80 –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ñ–∞–π—Ä–≤–æ–ª–∞
sudo ufw status

# –†–∞–∑—Ä–µ—à–∏—Ç—å HTTP (–ø–æ—Ä—Ç 80)
sudo ufw allow 80/tcp

# –ï—Å–ª–∏ –Ω—É–∂–Ω–æ, —Ä–∞–∑—Ä–µ—à–∏—Ç–µ HTTPS (–ø–æ—Ä—Ç 443)
sudo ufw allow 443/tcp

# –í–∫–ª—é—á–∏—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª (–µ—Å–ª–∏ –µ—â–µ –Ω–µ –≤–∫–ª—é—á–µ–Ω)
sudo ufw enable
```

### 7. –û–±–Ω–æ–≤–∏—Ç–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### –ë—ç–∫–µ–Ω–¥ (`backend/.env`):

```env
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–æ–º–µ–Ω:
ALLOWED_ORIGINS=http://your-domain.com,https://your-domain.com

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ IP:
ALLOWED_ORIGINS=http://123.45.67.89,http://123.45.67.89:3000
```

**–í–∞–∂–Ω–æ:** –ï—Å–ª–∏ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Nginx –Ω–∞ –ø–æ—Ä—Ç—É 80, —É–∫–∞–∂–∏—Ç–µ URL –±–µ–∑ –ø–æ—Ä—Ç–∞:
```env
ALLOWED_ORIGINS=http://123.45.67.89
```

#### –§—Ä–æ–Ω—Ç–µ–Ω–¥ (`.env.local`):

```env
# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ –¥–æ–º–µ–Ω:
NEXT_PUBLIC_API_URL=http://your-domain.com/api/auth

# –ï—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ IP:
NEXT_PUBLIC_API_URL=http://123.45.67.89/api/auth
```

**–í–∞–∂–Ω–æ:** –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `/api/auth`, —Ç–∞–∫ –∫–∞–∫ Nginx –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api` –Ω–∞ –±—ç–∫–µ–Ω–¥.

### 8. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

```bash
# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –±—ç–∫–µ–Ω–¥
pm2 restart algospec-backend

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥
pm2 restart algospec-frontend
```

### 9. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–∫–∞–ª—å–Ω–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ
curl http://localhost

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∏–∑–≤–Ω–µ (–∑–∞–º–µ–Ω–∏—Ç–µ –Ω–∞ –≤–∞—à IP –∏–ª–∏ –¥–æ–º–µ–Ω)
curl http://123.45.67.89
# –∏–ª–∏
curl http://your-domain.com
```

**–û—Ç–∫—Ä–æ–π—Ç–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ:**
- `http://your-ip-address` (–±–µ–∑ –ø–æ—Ä—Ç–∞!)
- `http://your-domain.com` (–±–µ–∑ –ø–æ—Ä—Ç–∞!)

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤

### –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ Nginx —Å–ª—É—à–∞–µ—Ç –ø–æ—Ä—Ç 80

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤
sudo netstat -tulpn | grep :80
# –∏–ª–∏
sudo ss -tulpn | grep :80
```

–î–æ–ª–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:
```
tcp  0  0  0.0.0.0:80  0.0.0.0:*  LISTEN  1234/nginx
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω—ã

```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ PM2
pm2 status

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ—Ä—Ç–æ–≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
sudo netstat -tulpn | grep :3000  # –§—Ä–æ–Ω—Ç–µ–Ω–¥
sudo netstat -tulpn | grep :3001  # –ë—ç–∫–µ–Ω–¥
```

## ‚ö†Ô∏è –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü—Ä–æ–±–ª–µ–º–∞ 1: –ü–æ—Ä—Ç 80 –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–æ—Ü–µ—Å—Å–æ–º

```bash
# –ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å –Ω–∞ –ø–æ—Ä—Ç—É 80
sudo lsof -i :80
# –∏–ª–∏
sudo fuser 80/tcp

# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å –∏–ª–∏ –∏–∑–º–µ–Ω–∏—Ç–µ –µ–≥–æ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```

### –ü—Ä–æ–±–ª–µ–º–∞ 2: Nginx –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏
sudo tail -f /var/log/nginx/error.log

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
sudo nginx -t
```

### –ü—Ä–æ–±–ª–µ–º–∞ 3: –°–∞–π—Ç –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π—Ä–≤–æ–ª:**
   ```bash
   sudo ufw status
   sudo ufw allow 80/tcp
   ```

2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –∑–∞–ø—É—â–µ–Ω—ã:**
   ```bash
   pm2 status
   curl http://localhost:3000
   curl http://localhost:3001
   ```

3. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ Nginx:**
   ```bash
   sudo tail -f /var/log/nginx/error.log
   sudo tail -f /var/log/nginx/access.log
   ```

4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –æ–±–ª–∞—á–Ω–æ–≥–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞:**
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç –≤ Security Groups (AWS)
   - –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç –≤ Firewall Rules (DigitalOcean, Vultr –∏ —Ç.–¥.)

### –ü—Ä–æ–±–ª–µ–º–∞ 4: CORS –æ—à–∏–±–∫–∏

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `backend/.env` —É–∫–∞–∑–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π origin:

```env
# –ï—Å–ª–∏ —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ http://123.45.67.89 (–±–µ–∑ –ø–æ—Ä—Ç–∞)
ALLOWED_ORIGINS=http://123.45.67.89

# –ù–ï –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ø–æ—Ä—Ç 3000, –µ—Å–ª–∏ –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ Nginx –Ω–∞ –ø–æ—Ä—Ç—É 80!
```

## üìù –ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

–ü–æ—Å–ª–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å ‚Üí http://your-domain.com:80 (–∏–ª–∏ –ø—Ä–æ—Å—Ç–æ http://your-domain.com)
                ‚Üì
            Nginx (–ø–æ—Ä—Ç 80)
                ‚Üì
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚Üì                       ‚Üì
–§—Ä–æ–Ω—Ç–µ–Ω–¥              –ë—ç–∫–µ–Ω–¥ API
(–ø–æ—Ä—Ç 3000)          (–ø–æ—Ä—Ç 3001)
```

**URL –¥–ª—è –¥–æ—Å—Ç—É–ø–∞:**
- –§—Ä–æ–Ω—Ç–µ–Ω–¥: `http://your-domain.com` –∏–ª–∏ `http://123.45.67.89`
- API: `http://your-domain.com/api` –∏–ª–∏ `http://123.45.67.89/api`

## ‚úÖ –ß–µ–∫–ª–∏—Å—Ç

- [ ] Nginx —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏ –∑–∞–ø—É—â–µ–Ω
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∞ –≤ `/etc/nginx/sites-available/algospec`
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∞ (—Å–∏–º–≤–æ–ª–∏—á–µ—Å–∫–∞—è —Å—Å—ã–ª–∫–∞ –≤ `sites-enabled`)
- [ ] –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ (`nginx -t`)
- [ ] Nginx –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∂–µ–Ω
- [ ] –ü–æ—Ä—Ç 80 –æ—Ç–∫—Ä—ã—Ç –≤ —Ñ–∞–π—Ä–≤–æ–ª–µ
- [ ] –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –æ–±–Ω–æ–≤–ª–µ–Ω—ã (–±–µ–∑ –ø–æ—Ä—Ç–∞ 3000 –≤ URL)
- [ ] –ü—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø—É—â–µ–Ω—ã
- [ ] –°–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ `http://your-ip` –∏–ª–∏ `http://your-domain`

---

**–ì–æ—Ç–æ–≤–æ!** –¢–µ–ø–µ—Ä—å –≤–∞—à —Å–∞–π—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –Ω–∞ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –ø–æ—Ä—Ç—É 80. üöÄ

